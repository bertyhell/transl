CREATE TABLE "public"."branch_ancestors" ("id" serial NOT NULL, "uuid" uuid NOT NULL DEFAULT gen_random_uuid(), "branch_id" integer NOT NULL, "ancestor_branch_id" integer NOT NULL, "ancestor_level" integer NOT NULL, PRIMARY KEY ("id") , FOREIGN KEY ("branch_id") REFERENCES "public"."branches"("id") ON UPDATE cascade ON DELETE cascade, FOREIGN KEY ("ancestor_branch_id") REFERENCES "public"."branches"("id") ON UPDATE cascade ON DELETE cascade, UNIQUE ("id"), UNIQUE ("uuid"));COMMENT ON TABLE "public"."branch_ancestors" IS E'store for each branch all its ancestors';
CREATE EXTENSION IF NOT EXISTS pgcrypto;
